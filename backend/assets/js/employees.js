!function(e){"use strict";var a={days:[]},i={cloneForm:e(".bookmify_be_content .bookmify_be_popup_form_wrap").clone()},o={page:1,search:"",order:"ASC",text:"",orderClass:"order_asc",IDs:[]},t={janNameInLocal:e(".bookmify_be_months_hidden").find(".jan").val(),febNameInLocal:e(".bookmify_be_months_hidden").find(".feb").val(),marNameInLocal:e(".bookmify_be_months_hidden").find(".mar").val(),aprNameInLocal:e(".bookmify_be_months_hidden").find(".apr").val(),mayNameInLocal:e(".bookmify_be_months_hidden").find(".may").val(),junNameInLocal:e(".bookmify_be_months_hidden").find(".jun").val(),julNameInLocal:e(".bookmify_be_months_hidden").find(".jul").val(),augNameInLocal:e(".bookmify_be_months_hidden").find(".aug").val(),sepNameInLocal:e(".bookmify_be_months_hidden").find(".sep").val(),octNameInLocal:e(".bookmify_be_months_hidden").find(".oct").val(),novNameInLocal:e(".bookmify_be_months_hidden").find(".nov").val(),decNameInLocal:e(".bookmify_be_months_hidden").find(".dec").val(),defaultOption:e(".bookmify_be_months_hidden").find(".def").val()},n=bookmifyConfig,s={iaoAlertTime:"5000",iaoAlertPosition:"bottom-right",alertSuccessIcon:'<span class="icon_holder success"><i class="xcon-ok"></i></span>',alertWarningIcon:'<span class="icon_holder warning"><i class="xcon-attention-alt"></i></span>',deletedText:'<span class="text">'+n.deletedText+"</span>",updatedText:'<span class="text">'+n.updatedText+"</span>",addedText:'<span class="text">'+n.addedText+"</span>",noDateEnteredText:'<span class="text">'+n.noDateEnteredText+"</span>",noTitleEnteredText:'<span class="text">'+n.noTitleEnteredText+"</span>",errorField:'<span class="error_note">'+n.errorField+"</span>",invalidEmail:'<span class="error_note">'+n.invalidEmail+"</span>",employeeID:"",employeeAuthCode:"",cantDeleteEmployee:n.cantDeleteEmployee,ajaxurl:n.ajaxUrl,demoWpUserID:n.demoWpUserID,cacheElements:function(){this.cache={filterServiceList:e(".bookmify_be_services_filter_list"),filterServiceWrap:e(".bookmify_be_employees .bookmify_be_filter_list"),filterServiceInput:e(".bookmify_be_employees .bookmify_be_filter .filter_list"),filterServiceInputPlaceholder:e(".bookmify_be_employees .bookmify_be_filter .filter_list").attr("data-placeholder")}},init:function(){e(".bookmify_be_employees").length&&e(".bookmify_be_content .bookmify_be_popup_form_wrap").remove(),this.cacheElements(),this.openerEmployee(),this.insertEmployee(),this.imgToSvg(),this.deleteEmployee(),this.doFilter(),e.protip()},popperLocations:function(){var a=e(".nano.employee_locations"),i=e('body > .bookmify_be_popup_form_employee .location_wrap input[name="location"]'),o=i.siblings(".bot_btn");function t(){" "===i.val()||""===i.val()?o.removeClass("opened"):o.addClass("opened")}e(window).on("click",function(){e(".nano").removeClass("focused"),e("input").removeClass("input_clicked")}),a.on("click",function(e){e.stopPropagation()}),i.on("click",function(o){o.stopPropagation(),a.css({width:i.outerWidth()+"px"}),i.hasClass("input_clicked")?(e(".nano").removeClass("focused"),e("input").removeClass("input_clicked")):(e(".nano").removeClass("focused"),e("input").removeClass("input_clicked"),i.addClass("input_clicked"),a.addClass("focused")),new Popper(i,a,{placement:"bottom-start",boundariesElement:"window",onUpdate:function(){a.css({width:i.outerWidth()+"px"})}}),a.find(".nano-content > div").on("click",function(a){a.stopPropagation();var o=e(this).html(),n=e(this).data("id");0===n?i.val(""):i.val(o),i.parent().find('input[type="hidden"]').val(n),t(),e(".nano").removeClass("focused"),e("input").removeClass("input_clicked"),i.parent().removeClass("required_error"),i.parent().find(".error_note").remove()})}),a.css({width:i.outerWidth()+"px"}),o.on("click",function(){i.val(""),i.parent().find('input[type="hidden"]').val(""),o.removeClass("opened"),e(".nano").removeClass("focused"),e("input").removeClass("input_clicked")}),t()},popperWPUsers:function(){var a=e(".nano.wp_users"),i=e('body > .bookmify_be_popup_form_employee input[name="wp_user"]'),o=i.siblings(".bot_btn");function t(){" "===i.val()||""===i.val()?o.removeClass("opened"):o.addClass("opened")}e(window).on("click",function(){e(".nano").removeClass("focused"),e("input").removeClass("input_clicked")}),a.on("click",function(e){e.stopPropagation()}),i.on("click",function(o){o.stopPropagation(),a.css({width:i.outerWidth()+"px"}),i.hasClass("input_clicked")?(e("input").removeClass("input_clicked"),e(".nano").removeClass("focused")):(e(".nano").removeClass("focused"),e("input").removeClass("input_clicked"),i.addClass("input_clicked"),a.addClass("focused")),new Popper(i,a,{placement:"bottom-start",boundariesElement:"window",onUpdate:function(){a.css({width:i.outerWidth()+"px"})}}),a.find(".nano-content > div").on("click",function(a){a.stopPropagation();var o=e(this).html(),n=e(this).data("id");i.val(o),i.parent().find('input[type="hidden"]').val(n),t(),e(".nano").removeClass("focused"),e("input").removeClass("input_clicked"),i.parent().removeClass("required_error"),i.parent().find(".error_note").remove()})}),a.css({width:i.outerWidth()+"px"}),o.on("click",function(){i.val(""),i.parent().find('input[type="hidden"]').val(""),o.removeClass("opened"),e(".nano").removeClass("focused"),e("input").removeClass("input_clicked")}),t()},intlTelInput:function(){e("body > .bookmify_be_popup_form_wrap .phone_wrap input").each(function(){var a=e(this),i=a.val();a.intlTelInput({autoPlaceholder:"aggressive",autoHideDialCode:!0}),a.val(i)})},employeeServicesOnClick:function(){var a=e(".bookmify_be_employee_edite_services li.category_item"),i=this;a.each(function(){var a=e(this),o=a.find('.category_heading input[type="checkbox"]'),t=a.find('.services_list_cat input[type="checkbox"]');t.on("change",function(){var o=e(this),t=o.closest("li");t.find(".price_capacity input").attr("disabled",!o.is(":checked")),o.is(":checked")?t.addClass("active"):t.removeClass("active"),i.checkEmployeeServicesCheckboxes(a)}),o.on("change",function(){var e=t.closest("li"),a=e.find(".price_capacity input");o.is(":checked")?(e.addClass("active"),t.prop("checked",!0),a.attr("disabled",!1)):(e.removeClass("active"),t.prop("checked",!1),a.attr("disabled",!0))}),o.closest("li").find(".cat_title").on("click",function(){var e=t.closest("li"),a=e.find(".price_capacity input");o.is(":checked")?o.prop("checked",!1):o.prop("checked",!0),o.is(":checked")?(e.addClass("active"),t.prop("checked",!0),a.attr("disabled",!1)):(e.removeClass("active"),t.prop("checked",!1),a.attr("disabled",!0))}),i.checkEmployeeServicesCheckboxes(a)})},checkEmployeeServicesCheckboxes:function(e){var a=e.find('.services_list_cat input[type="checkbox"]'),i=e.find('.services_list_cat input[type="checkbox"]:checked'),o=e.find('.category_heading input[type="checkbox"]');i.length===a.length?o.prop("checked",!0):o.prop("checked",!1)},openerEmployee:function(){var a=this;e(".bookmify_be_employees_list .bookmify_be_edit").off().on("click",function(i){i.preventDefault(),a.cache.filterServiceWrap.removeClass("opened");var o=e(this),t=o.closest(".bookmify_be_list_item"),n={action:"ajaxQueryEditEmployee",bookmify_data:t.data("entity-id"),bookmify_authcode:a.employeeAuthCode};return o.hasClass("loading")||(o.addClass("loading"),t.addClass("loading"),e.ajax({type:"POST",url:a.ajaxurl,cache:!0,data:n,success:function(e){o.removeClass("loading"),t.removeClass("loading"),a.getRequestedEmployeePopup(e)},error:function(){}})),!1})},getRequestedEmployeePopup:function(a){var i=e.parseJSON(a).bookmify_be_data;e("body").addClass("disable_scroll").append(i),e("body > .bookmify_be_popup_form_wrap").addClass("bookmify_be_popup_form_employee"),this.imgToSvg(),this.universalTab(),this.intlTelInput(),this.mediaUploadToEmployee(),this.popperLocations(),this.popperWPUsers(),this.employeeServicesOnClick(),this.workingHoursPopper(),this.checkWorkingHours(),this.applyHours(),this.breaksAdd(),this.breaksPopper(),this.breaksDelete(),this.breakTimeSelect(),this.updateDayOffOfEmployee(),this.multiDatesPickerEmployees(),this.datePickerSingle(),this.addDayOffToEmployee(),this.deleteDayOff();var o=e("body > .bookmify_be_popup_form_wrap");this.googleDisable(),this.saveEmployee(),this.cancelItem(),o.addClass("enable"),this.closersPopup()},googleDisable:function(){var a=this;e("body > .bookmify_be_popup_form_wrap").find(".bookmify_be_google_disable").off().on("click",function(){var i=e(this);if(!i.hasClass("disabled")){var o={action:"ajaxQueryDeleteGoogleData",bookmify_data:i.closest(".bookmify_be_popup_form_employee").data("entity-id")};i.hasClass("loading")||(i.addClass("loading"),e.ajax({type:"POST",url:a.ajaxurl,cache:!0,data:o,success:function(o){i.removeClass("loading"),i.closest(".bookmify_be_emmp_google_cal").html(e.parseJSON(o).html),a.googleDisable()},error:function(){}}))}return!1})},universalTab:function(){e(".bookmify_be_tab_wrap").each(function(){var a=e(this);a.children(".bookmify_be_link_tabs").find("a.bookmify_be_tab_link").on("click",function(){e(".nano").removeClass("focused clicked"),e("input").removeClass("input_clicked");var i=e(this).parent(),o=i.index();return i.siblings("li").removeClass("active"),i.addClass("active"),a.children().children(".bookmify_be_tab_pane").removeClass("active"),e(a.children().children(".bookmify_be_tab_pane")[o]).addClass("active"),!1})})},closerButton:function(){var a=this;e(".bookmify_be_popup_form_wrap.enable").find("span.closer").on("click",function(){a.closePopupForm()})},closerEsc:function(){e(document).keyup(function(e){e.key})},closersPopup:function(){this.closerEsc(),this.closerButton()},closePopupForm:function(){e(".nano").removeClass("focused"),e("input").removeClass("input_clicked");var a=e(".bookmify_be_popup_form_wrap.enable");e("body").removeClass("disable_scroll"),a.removeClass("enable"),setTimeout(function(){a.remove()},300)},imgToSvg:function(){e("img.bookmify_be_svg").each(function(){var a=e(this),i=a.attr("class"),o=a.attr("src");e.get(o,function(o){var t=e(o).find("svg");void 0!==i&&(t=t.attr("class",i+" replaced-svg")),t=t.removeAttr("xmlns:a"),a.replaceWith(t)},"xml")})},workingHoursPopper:function(){var a=e(".nano.employee_working_hours"),i=a.find(".nano-content > div"),o=i.length;function t(){i.on("click",function(){var i=e(this).html(),o=a.attr("data-name");e(this).hasClass("disabled")||(e('.bookmify_be_popup_form_employee input[name="'+o+'"]').val(i),a.removeClass("focused clicked"))})}e("ul.bookmify_be_working_hours_list.employee_wh input.time").off().on("click",function(n){n.stopPropagation(),n.preventDefault(),i.removeClass();var s=e(this),r=s.parent().parent().find(".start input").val(),l=s.parent().parent().find(".end input").val(),d=s.parent().attr("class");if(new Popper(s,a,{placement:"bottom-start"}),a.attr("data-name",s.attr("name")),s.hasClass("input_clicked")?(e("input").removeClass("input_clicked"),e(".nano").removeClass("focused clicked")):(e(".nano").removeClass("focused clicked"),e("input").removeClass("input_clicked"),s.addClass("input_clicked"),a.addClass("focused")),"end"===d){if(""!==r)for(var c=0;c<o;c++){var p=i[c],f=e(p).html();if(e(p).addClass("disabled"),f===r)break}}else if(""!==l){i.addClass("disabled");for(var m=0;m<o;m++){var _=i[m];if(e(_).html()===l)break;e(_).removeClass("disabled")}}var u=-((a.height()-20)/2-11);if(s.val())for(var b=0;b<o;b++){var v=i[b];if(e(v).html()===s.val()){e(v).addClass("selected");break}e(v).hasClass("disabled")||(u+=27)}else u=0;e(".scrollbar-inner").scrollTop(u),a.addClass("focused"),t()}),t(),e(window).on("click",function(){}),a.on("click",function(e){e.stopPropagation(),e.preventDefault()})},breaksAdd:function(){var a=e("ul.bookmify_be_working_hours_list.employee_wh .breaks_add a"),i=this;a.on("click",function(){var a=e(this),o=a.parent().siblings(".breaks_list"),t=o.find(".item").length,n=a.parents(".hour_item").parent(),s=n.attr("class")+"_break_start",r=n.attr("class")+"_break_end",l=n.attr("class")+"_start_"+t,d=n.attr("class")+"_end_"+t;return o.append('<div class="item"><div class="break_start"><input readonly class="break_time '+l+'" type="text" name="'+s+'" value="" /></div><div class="break_end"><input readonly class="break_time '+d+'" type="text" name="'+r+'" value="" /></div><div class="break_del"><span></span></div></div>'),i.breaksDelete(),i.applyHours(),i.breaksPopper(),!1})},breaksDelete:function(){e("ul.bookmify_be_working_hours_list.employee_wh .break_del span").off().on("click",function(){for(var a=e(this),i=a.closest(".breaks_list").find(".item"),o=a.closest(".hour_item").parent().attr("class"),t=a.closest(".breaks_list").find(".item").length,n=a.parent().parent(),s=n.index(),r=0,l=0;l<t;l++)l===s?r--:(e(i[l]).find(".break_start input").removeClass().addClass("break_time "+o+"_start_"+r),e(i[l]).find(".break_end input").removeClass().addClass("break_time "+o+"_end_"+r)),r++;n.remove()})},applyHours:function(){var a=this,i=e("ul.bookmify_be_working_hours_list.employee_wh .apply span");i.length&&(i.on("click",function(){var i=e(this),o=i.parents(".hour_item").parent(),t=i.closest("ul.bookmify_be_working_hours_list").children("li"),n=o.attr("class"),s=o.find(".start input").val(),r=o.find(".end input").val(),l=o.find(".breaks_list").html();t.each(function(){var a=e(this);if(!a.hasClass(n)){var i=a.attr("class"),o=l.bookmifyBeReplaceAll_Settings(n,i);a.find(".start").attr("data-value",s).find("input").val(s),a.find(".end").attr("data-value",r).find("input").val(r),a.find(".breaks_list").html(o),a.find(".breaks_list .item").each(function(){var a=e(this).find(".break_start").attr("data-value"),i=e(this).find(".break_end").attr("data-value");e(this).find(".break_start input").val(a),e(this).find(".break_end input").val(i)})}}),a.breaksPopper(),a.breaksDelete()}),e.protip())},breaksPopper:function(){var a=this,i=e("ul.bookmify_be_working_hours_list.employee_wh .breaks .break_time"),o=e(".nano.employee_break");i.off().on("click",function(i){a.applyHours(),a.breakTimeSelect(),i.stopPropagation();var t=e(this),n=t.parents(".hour_item").parent().find(".start input").val(),s=t.parents(".hour_item").parent().find(".end input").val(),r=t.parent().parent().find(".break_start input").val(),l=t.parent().parent().find(".break_end input").val();r=t.parent().parent().find(".break_start input").val(),l=t.parent().parent().find(".break_end input").val();var d=t.parent().attr("class"),c=t.attr("class").replace("break_time ",""),p=(new Popper(t,o,{placement:"bottom-start"}),t.closest(".bookmify_be_employees_item").data("entity-id"));t.hasClass("input_clicked")?(e(".nano").removeClass("focused clicked"),e("input").removeClass("input_clicked")):(e(".nano").removeClass("focused clicked"),e("input").removeClass("input_clicked"),t.addClass("input_clicked"),o.addClass("focused"),o.removeClass("loaded").addClass("clicked "+d).attr("data-name",c).attr("data-id",p));var f=o.find(".nano-content > div");f.removeClass();for(var m=f.length,_=0,u=0;u<m;u++){var b=f[u],v=e(b).html();v===n&&(_++,u),v===s&&_++,1===_?e(b).removeClass("disabled"):e(b).addClass("disabled")}if("break_start"===d){if(""!==l){var y=0;for(u=0;u<m;u++){var h=f[u];e(h).html()===l&&y++,1===y&&e(h).addClass("disabled")}}}else if(""!==r){var k=0;for(u=0;u<m;u++){var C=f[u],g=e(C).html();0===k&&e(C).addClass("disabled"),g===r&&k++}}var w=-((o.height()-20)/2-11);if(t.val())for(var T=0;T<m;T++){var x=f[T];if(e(x).html()===t.val()){e(x).addClass("selected");break}e(x).hasClass("disabled")||(w+=27)}else w=0;e(".scrollbar-inner").scrollTop(w),a.breakTimeSelect()}),e(window).on("click",function(){o.addClass("loaded").removeClass("clicked break_start break_end")})},breakTimeSelect:function(){e(".nano.employee_break").find(".nano-content > div").on("click",function(){var a=e(this);if(!a.hasClass("disabled")){var i=a.html(),o=a.parents(".nano").attr("data-name");e(".bookmify_be_popup_form_employee input."+o).val(i).parent().attr("data-value",i)}})},addDayOffToEmployee:function(){var i=this;e(".bookmify_be_employeestabs_wrap .bookmify_day_off_add_section .do_dd_footer a.add").off().on("click",function(o){o.preventDefault();var t=e(this),n=t.closest(".bookmify_day_off_add_section"),s=n.siblings(".do_list").find(".bookmify_private_dayoff_list"),r=n.find("form").serialize(),l=n.find('input[name="offday_name"]').val(),d=n.find('input[name="offday_days"]').data("id"),c=n.find('input[name="offday_hidden_day"]').val(),p=c.split(", ").length,f=e(".bookmify_private_dayoff_list ul"),m=0;if(""===l||""===c)""===c?e.iaoAlert({msg:i.alertWarningIcon+i.noDateEnteredText,type:"success",alertTime:i.iaoAlertTime,position:i.iaoAlertPosition}):e.iaoAlert({msg:i.alertWarningIcon+i.noTitleEnteredText,type:"success",alertTime:i.iaoAlertTime,position:i.iaoAlertPosition});else{if(f.hasClass("opened")&&(f.children("li.opened").find(".required_field").each(function(){var a=e(this);""===a.val()&&(a.parent().find(".error_note").remove(),a.parent().addClass("required_error").append(i.errorField),m++)}),0===m&&(f.removeClass("opened").children("li").removeClass("opened").find(".bookmify_day_off_edit_dd").slideUp(300),300)),0!==m)return i.scrollToTop(300),!1;t.addClass("await");var _={action:"ajaxQueryAddOffDayTimely",bookmify_data:r};e.ajax({type:"POST",url:i.ajaxurl,cache:!0,data:_,success:function(o){i.offdayInsertAjaxProcess(o,s,p,t),i.multiDatesPickerEmployees(),e('input[name="offday_days"][data-id="'+d+'"]').multiDatesPicker("removeDates",a.days),a.days=[],e('.bookmify_be_popup_form_employee .bookmify_day_off_add_section input[name="offday_name"]').val(""),e('.bookmify_be_popup_form_employee .bookmify_day_off_add_section input[name="offday_hidden_day"]').val(""),e(".bookmify_be_popup_form_employee .bookmify_day_off_add_section input[type=checkbox]").removeAttr("checked"),i.imgToSvg(),i.updateDayOffOfEmployee(),i.deleteDayOff(),i.datePickerSingle()},error:function(){}})}return!1})},offdayInsertAjaxProcess:function(a,i,o,t){var n=e.parseJSON(a);i.find("ul.dayoff_list li").length?i.find("ul.dayoff_list li:first").before(n.html):i.find("ul.dayoff_list").append(n.html);for(var s=0;s<o;s++)e(i.find("ul.dayoff_list li")[s]).addClass("added");setTimeout(function(){i.find("ul.dayoff_list li").removeClass("added")},7e3),t.removeClass("await")},datePickerSingle:function(){var a=this;e(".mdp-do-hidden").each(function(){var i=e(this);if(i.length){var o=i.siblings("input.offday_hidden_day"),t=i.data("selected-day"),n=i.closest(".bookmify_be_list_item").find(".header_in .list_date");i.datepicker({dateFormat:"yy-mm-dd",altField:o,altFormat:"yy-mm-dd",onSelect:function(){i.datepicker("hide"),n.html("").html(a.wpDateToOptionDate(o.val()))}}),i.datepicker("setDate",t)}})},updateDayOffOfEmployee:function(){var a=e(".bookmify_be_popup_form_employee ul.dayoff_list a.bookmify_be_edit"),i=this;a.off().on("click",function(a){a.preventDefault();var o=e(this).closest(".bookmify_be_list_item"),t=o.find(".bookmify_day_off_edit_dd"),n=o.siblings(),s=n.find(".bookmify_day_off_edit_dd"),r=o.parent(),l=0;return i.simultaneouslyTyping(),r.hasClass("opened")&&r.children("li.opened").find(".required_field").each(function(){var a=e(this);""===a.val()&&(a.parent().find(".error_note").remove(),a.parent().addClass("required_error").append(i.errorField),l++)}),0===l&&(o.hasClass("opened")?(t.slideUp(),o.removeClass("opened").parent().removeClass("opened").parent().removeClass("opened")):(s.slideUp(),t.slideDown(),n.removeClass("opened"),o.addClass("opened").parent().addClass("opened").parent().addClass("opened")),!1)})},multiDatesPickerEmployees:function(){e('.bookmify_day_off_add_section input[name="offday_days"]').each(function(){var i=e(this),o=i.data("id"),t=[];i.multiDatesPicker({dateFormat:"yy-mm-dd",altField:"#offday_hidden_day_"+o,onSelect:function(e){t.push(e),a.days.push(e)}});var n=i.closest(".bookmify_day_off_add_section");n.find(".do_dd_footer a.cancel").on("click",function(){return e('input[name="offday_days"][data-id="'+o+'"]').multiDatesPicker("removeDates",a.days),a.days=[],n.find("input[type=text]").val(""),n.find("input[type=hidden]").val(""),n.find("input[type=checkbox]").removeAttr("checked"),!1})})},saveEmployee:function(){var a=e(".bookmify_be_popup_form_employee .bookmify_be_popup_form_button a.save"),i=this;a.off().on("click",function(){var a=e(this),o=a.closest(".bookmify_be_popup_form_employee"),t="insert",n=0,s=0,r=0,l=o.find(".bookmify_be_employeestabs_wrap > .bookmify_be_link_tabs"),d=o.find(".bookmify_be_employeestabs_wrap > .bookmify_be_content_tabs"),c=o.find(".required_field"),p=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(c.each(function(){var a=e(this);a.hasClass("employee_email")?""===a.val()?a.parent().hasClass("required_error")||(a.parent().find(".error_note").remove(),a.parent().addClass("required_error").append(i.errorField),n++,s++):p.test(a.val())||(a.parent().find(".error_note").remove(),a.parent().addClass("invalid_email").append(i.invalidEmail),n++,s++):""===a.val()&&(a.parent().find(".error_note").remove(),a.parent().addClass("required_error").append(i.errorField),n++,a.parent().hasClass("do_item")?r++:s++)}),0!==n){if(0!==s)0!==l.find("li.active").index()&&(l.find("li.active").removeClass("active"),d.children(".bookmify_be_tab_pane.active").removeClass("active"),l.find("li:first").addClass("active"),d.children(".bookmify_be_tab_pane:first").addClass("active"));else if(0!==r){3!==l.find("li.active").index()&&(l.find("li.active").removeClass("active"),d.children(".bookmify_be_tab_pane.active").removeClass("active"),l.find("li:nth-child(4)").addClass("active"),d.children(".bookmify_be_tab_pane:nth-child(4)").addClass("active"));var f=d.children(".bookmify_be_tab_pane:nth-child(4)").find(".bookmify_be_link_tabs"),m=d.children(".bookmify_be_tab_pane:nth-child(4)").find(".bookmify_be_content_tabs");0!==f.find("li.active").index()&&(f.find("li.active").removeClass("active"),m.children(".bookmify_be_tab_pane.active").removeClass("active"),f.find("li:first").addClass("active"),m.children(".bookmify_be_tab_pane:first").addClass("active"))}return i.scrollToTop(500),!1}a.addClass("await");var _=o.find(".bookmify_be_employee_edit_detail"),u={};u.id=o.data("entity-id"),u.att_id=_.find("input[name='employee_img_id']").val(),u.first_name=_.find("input[name='first_name']").val(),u.last_name=_.find("input[name='last_name']").val(),u.email=_.find("input[name='email']").val(),u.location_id=_.find("input[name='location_id']").val(),u.phone=_.find("input[name='phone']").val(),u.wp_user_id=_.find("input[name='wp_user_id']").val(),u.checked=!0===_.find("input[name='employee_visibility']").prop("checked")?"public":"private",u.desc=_.find("textarea").val();var b=o.data("entity-id"),v=o.find("ul.services_list_cat"),y=[],h={allextra:[]};v.find("li.active").each(function(){var a={},i=e(this);a.id=i.find("input[type='checkbox']").val(),a.price=i.find(".bookmify_be_employees_service_price").val(),a.max_cap=i.find(".bookmify_be_employees_service_cmax").val(),a.min_cap=i.find(".bookmify_be_employees_service_cmin").val(),h.allextra.push(a)}),h.employeeID=[],h.employeeID.push(b),y.push(h);var k=o.find("form.bookmify_working_hours"),C=k.serialize(),g=[],w=[],T=[],x=[],D=[],I=[],S=[];k.find("li.monday .breaks_list .item").each(function(){var a=e(this).find(".break_start input").val(),i=e(this).find(".break_end input").val();""!==a&&""!==i&&(g.push(a),g.push(i))}),k.find("li.tuesday .breaks_list .item").each(function(){var a=e(this).find(".break_start input").val(),i=e(this).find(".break_end input").val();""!==a&&""!==i&&(w.push(a),w.push(i))}),k.find("li.wednesday .breaks_list .item").each(function(){var a=e(this).find(".break_start input").val(),i=e(this).find(".break_end input").val();""!==a&&""!==i&&(T.push(a),T.push(i))}),k.find("li.thursday .breaks_list .item").each(function(){var a=e(this).find(".break_start input").val(),i=e(this).find(".break_end input").val();""!==a&&""!==i&&(x.push(a),x.push(i))}),k.find("li.friday .breaks_list .item").each(function(){var a=e(this).find(".break_start input").val(),i=e(this).find(".break_end input").val();""!==a&&""!==i&&(D.push(a),D.push(i))}),k.find("li.saturday .breaks_list .item").each(function(){var a=e(this).find(".break_start input").val(),i=e(this).find(".break_end input").val();""!==a&&""!==i&&(I.push(a),I.push(i))}),k.find("li.sunday .breaks_list .item").each(function(){var a=e(this).find(".break_start input").val(),i=e(this).find(".break_end input").val();""!==a&&""!==i&&(S.push(a),S.push(i))});var P=o.find(".bookmify_private_dayoff_list"),E=[],A={alldayOffs:[]};P.find(".bookmify_be_list_item").each(function(){var a={},i=e(this);a.id=i.data("entity-id"),a.dateOff=i.find('input[name="offday_hidden_day"]').val(),a.title=i.find('input[name="offday_name"]').val(),a.checked=!0===i.find("input[name='offday_repeat']").prop("checked")?1:0,A.alldayOffs.push(a)}),E.push(A),u.id&&(t="update");var O={action:"ajaxQueryInsertOrUpdateEmployee",bookmify_data:JSON.stringify(u),bookmify_service_data:JSON.stringify(y),bookmify_wh_data:C,employeeID:b,monday:g,tuesday:w,wednesday:T,thursday:x,friday:D,saturday:I,sunday:S,bookmify_do_data:JSON.stringify(E),insertOrUpdate:t,do:1};return e.ajax({type:"POST",url:i.ajaxurl,cache:!0,data:O,success:function(e){console.log(e),a.removeClass("await"),i.getUpdatedEmployeesList(e,t)},error:function(){}}),!1}),e(".bookmify_be_popup_form_employee input.required_field").keyup(function(){var a=e(this);(""!==a.val()&&a.parent().hasClass("required_error")||a.parent().hasClass("invalid_email"))&&(a.parent().removeClass("required_error invalid_email"),a.parent().find(".error_note").remove())})},getUpdatedEmployeesList:function(a,i){var o=this,t=e.parseJSON(a),n=e(".bookmify_be_employee_list_content"),s=e(".bookmify_be_page_title h3 span.count");o.closePopupForm(),"update"===i?setTimeout(function(){e.iaoAlert({msg:o.alertSuccessIcon+o.updatedText,type:"success",alertTime:o.iaoAlertTime,position:o.iaoAlertPosition})},301):setTimeout(function(){e.iaoAlert({msg:o.alertSuccessIcon+o.addedText,type:"success",alertTime:o.iaoAlertTime,position:o.iaoAlertPosition})},301),"cant"===t.demo_check&&setTimeout(function(){e.iaoAlert({msg:o.alertSuccessIcon+o.demoWpUserID,type:"success",alertTime:o.iaoAlertTime,position:o.iaoAlertPosition})},1e3),n.html(t.bookmify_be_data),s.html(t.number);var r=n.find(".employees_list > li");setTimeout(function(){r.each(function(a,i){setTimeout(function(){e(i).addClass("fadeInTop done")},100*a)})},150),o.init()},mediaUploadToEmployee:function(){e("body > .bookmify_be_popup_form_wrap .bookmify_thumb_edit").off().on("click",function(a){a.preventDefault(),a.stopPropagation(),e(".nano").removeClass("focused clicked"),e("input").removeClass("input_clicked");var i=e(this).closest(".bookmify_be_popup_form_wrap"),o=i.find('input[class="bookmify_be_img_id"]'),t=i.find(".bookmify_thumb_wrap"),n=i.find(".bookmify_thumb_remove"),s="",r=wp.media({library:{type:"image"},multiple:!1});return r.on("select",function(){var a=r.state().get("selection").toJSON();a.length&&(void 0!==a[0].sizes.thumbnail?a[0].sizes.thumbnail.url:a[0].url,s=void 0!==a[0].sizes.large?a[0].sizes.large.url:a[0].url,o.val(a[0].id),t.addClass("has_image").css({"background-image":"url("+s+")"}),e(this).hide(),n.show())}),r.open(),!1}),e("body > .bookmify_be_popup_form_wrap .bookmify_thumb_remove a").off().on("click",function(a){a.preventDefault(),a.stopPropagation(),e(".nano").removeClass("focused clicked"),e("input").removeClass("input_clicked");var i=e(this).closest(".bookmify_be_popup_form_wrap"),o=i.find('input[class="bookmify_be_img_id"]'),t=i.find(".bookmify_thumb_wrap");return o.val(""),t.removeClass("has_image").css({"background-image":"none"}),e(this).parent().hide(),!1})},deleteEmployee:function(){var a=e(".bookmify_be_employees_list .bookmify_be_delete"),i=this;a.off().on("click",function(){e(".bookmify_be_filter_list").removeClass("opened");var a=e(this),o=a.data("entity-id"),t=a.parents(".bookmify_be_list_item");return a.addClass("clicked"),i.confirmDeleteEmployee(t,o,a),!1})},confirmDeleteEmployee:function(a,i,o){var t=e("#bookmify_be_confirm"),n=t.find("a.yes"),s=t.find("a.no"),r=this;t.addClass("opened"),n.off().on("click",function(n){return n.preventDefault(),o.removeClass("clicked"),o.addClass("await"),o.addClass("loading"),a.addClass("loading"),e.ajax({type:"POST",url:r.ajaxurl,cache:!0,data:{action:"ajaxQueryDeleteEmployee",bookmify_employee_id:i},success:function(i){var t=e.parseJSON(i);e(".bookmify_be_page_title h3 span.count").html(t.number),0===parseInt(t.count)?(o.removeClass("await"),a.removeClass("opened").slideUp(300),a.parent().removeClass("opened"),setTimeout(function(){a.remove()},301),e.iaoAlert({msg:r.alertSuccessIcon+r.deletedText,type:"success",alertTime:r.iaoAlertTime,position:r.iaoAlertPosition})):(o.removeClass("await loading"),a.removeClass("opened loading"),a.parent().removeClass("opened"),e.iaoAlert({msg:r.alertWarningIcon+'<span class="error_note">'+r.cantDeleteEmployee+" "+t.count+"</span>",type:"success",alertTime:r.iaoAlertTime,position:r.iaoAlertPosition}))},error:function(){}}),t.removeClass("opened"),!1}),s.on("click",function(){return t.removeClass("opened"),o.removeClass("clicked"),!1}),e(document).keydown(function(e){if(27===e.keyCode)return t.removeClass("opened"),o.removeClass("clicked"),!1})},doFilter:function(){var a=e(".bookmify_be_pagination.employee_list li a"),i=this,t=e(".bookmify_be_filter_search");a.off().on("click",function(a){a.preventDefault(),e(".bookmify_be_filter_list").removeClass("opened");var t=e(this),n=t.parent(),s=t.data("page"),r=0;return n.hasClass("prev")?(s=t.parent().parent().find("li.active a").data("page")-1,r=1):n.hasClass("next")&&(s=t.parent().parent().find("li.active a").data("page")+1,r=1),n.hasClass("active")||(o.page=s,i.filterAjaxCall()),1===r&&(o.page=s,i.filterAjaxCall()),!1}),e(".bookmify_be_employees .bookmify_be_filter .filter_order").off().on("click",function(a){a.preventDefault(),e(".bookmify_be_filter_list").removeClass("opened");var t="ASC",n=e(this).closest(".bookmify_be_filter_order");return!n.hasClass("await")&&(n.addClass("await"),n.hasClass("active")?(n.removeClass("active"),t="ASC"):(n.addClass("active"),t="DESC"),o.order=t,o.orderClass="order_"+t.toLowerCase(),o.page=1,i.filterAjaxCall(),!1)});var n=null;e(".bookmify_be_employees .bookmify_be_filter .filter_search").off().on("keyup",function(){var a=e(this).val();o.page=1,clearTimeout(n),n=setTimeout(function(){if(o.search=a,a===o.text)return!1;o.text=a,t.removeClass("ready").addClass("await"),i.filterAjaxCall()},700)}),t.find(".icon").off().on("click",function(){e(".bookmify_be_filter_list").removeClass("opened"),t.removeClass("ready").addClass("await"),t.find("input").val(""),o.text="",o.search="",o.page=1,i.filterAjaxCall()}),e(window).on("click",function(){i.cache.filterServiceWrap.removeClass("opened")}),i.cache.filterServiceWrap.on("click",function(e){e.preventDefault(),e.stopPropagation(),i.cache.filterServiceWrap.addClass("opened")});var s=null;i.cache.filterServiceList.children("div").off().on("click",function(){var a=e(this),t=a.data("id");return a.hasClass("sending")?(a.removeClass("sending"),o.IDs=e.grep(o.IDs,function(e){return e!==t})):(a.addClass("sending"),o.IDs.push(t)),clearTimeout(s),i.checkNewValueForServiceFilterInEmployee(),s=setTimeout(function(){i.filterAjaxCall(),i.cache.filterServiceWrap.removeClass("opened")},700),!1}),i.cache.filterServiceWrap.find(".icon").off().on("click",function(e){e.preventDefault(),e.stopPropagation(),i.cache.filterServiceInput.attr("placeholder",i.cache.filterServiceInputPlaceholder),i.cache.filterServiceInput.siblings(".bookmify_be_new_value").html(""),i.cache.filterServiceWrap.removeClass("ready"),i.cache.filterServiceList.children("div").removeClass("sending"),o.IDs=[],i.cache.filterServiceWrap.removeClass("opened"),i.filterAjaxCall()})},checkNewValueForServiceFilterInEmployee:function(){if(e.isEmptyObject(o.IDs))this.cache.filterServiceInput.attr("placeholder",this.cache.filterServiceInputPlaceholder),this.cache.filterServiceInput.siblings(".bookmify_be_new_value").html(""),this.cache.filterServiceWrap.removeClass("ready");else{var a="";if(this.cache.filterServiceInput.attr("placeholder",""),o.IDs.length>1){var i=this.cache.filterServiceList.children("div").length;a='<span class="number">'+o.IDs.length+" / "+i+"</span>"}var t='<span class="text">'+this.cache.filterServiceList.find('div[data-id="'+o.IDs[0]+'"]').html()+"</span>";this.cache.filterServiceInput.siblings(".bookmify_be_new_value").html("").html(t+a),this.cache.filterServiceWrap.addClass("ready")}},filterAjaxCall:function(){var a=this,i=e(".bookmify_be_filter_search"),t=e(".bookmify_be_filter_order"),n={action:"ajaxFilterEmployeeList",bookmify_page:o.page,bookmify_search:o.search,bookmify_order:o.order,bookmify_services:o.IDs};e.ajax({type:"POST",url:a.ajaxurl,cache:!0,data:n,success:function(e){i.removeClass("await ready"),""!==o.search&&i.addClass("ready"),t.removeClass("await order_desc order_asc").addClass(o.orderClass),a.getFilteredEmlpoyeesList(e)},error:function(){}})},getFilteredEmlpoyeesList:function(a){var i=e.parseJSON(a),o=e(".bookmify_be_employee_list_content");o.html(i.bookmify_be_data);var t=o.find(".employees_list > li");setTimeout(function(){t.each(function(a,i){setTimeout(function(){e(i).addClass("fadeInTop done")},100*a)})},150),this.init()},checkWorkingHours:function(){var a=this,i=e("ul.bookmify_be_working_hours_list.employee_wh > li");i.length&&i.each(function(){var i=e(this),o=i.find(".day input[type=checkbox]");a.checkAgainWorkingHours(o,i),i.find(".item_wh .day").on("click",function(){o.is(":checked")?o.prop("checked",!1):o.prop("checked",!0),o=i.find(".day input[type=checkbox]"),a.checkAgainWorkingHours(o,i)})})},checkAgainWorkingHours:function(e,a){e.is(":checked")?(a.attr("data-checked","checked"),a.find("input.time").removeAttr("disabled")):(a.attr("data-checked",""),a.find("input.time").attr("disabled",""))},simultaneouslyTyping:function(){e('.do_list_content .dayoff_list input[name="offday_name"]').keyup(function(){var a=e(this),i=a.val();a.closest(".bookmify_be_list_item").find("span.list_title").text(i),""!==i&&a.parent().hasClass("required_error")&&(a.parent().removeClass("required_error invalid_email"),a.parent().find(".error_note").remove())}),e('.do_list_content .dayoff_list input[name="offday_repeat"]').on("change",function(){var a=e(this).closest(".bookmify_be_list_item").find(".header_in");this.checked?a.attr("data-yearly","yes"):a.attr("data-yearly","no")})},wpDateToOptionDate:function(e){var a=e.split("-"),i="",o="";switch(parseInt(a[1])){case 1:o=t.janNameInLocal;break;case 2:o=t.febNameInLocal;break;case 3:o=t.marNameInLocal;break;case 4:o=t.aprNameInLocal;break;case 5:o=t.mayNameInLocal;break;case 6:o=t.junNameInLocal;break;case 7:o=t.julNameInLocal;break;case 8:o=t.augNameInLocal;break;case 9:o=t.sepNameInLocal;break;case 10:o=t.octNameInLocal;break;case 11:o=t.novNameInLocal;break;case 12:o=t.decNameInLocal}switch(t.defaultOption){case"F d, Y":i=o+" "+a[2]+", "+a[0];break;case"d F, Y":i=a[2]+" "+o+", "+a[0];break;case"Y-m-d":i=a[0]+"-"+a[1]+"-"+a[2];break;case"m/d/y":i=a[1]+"/"+a[2]+"/"+a[0];break;case"d/m/y":i=a[2]+"/"+a[1]+"/"+a[0]}return i},deleteDayOff:function(){var a=this;e(".bookmify_private_dayoff_list .bookmify_be_delete").off().on("click",function(){var i=e(this),o=i.closest(".bookmify_be_list_item"),t=o.data("entity-id");return e(".nano").removeClass("focused"),e("input").removeClass("input_clicked"),""===t||void 0===t?o.hasClass("opened")?(o.slideUp(500),setTimeout(function(){o.parent().removeClass("opened"),o.remove()},501)):(o.slideUp(300),setTimeout(function(){o.remove()},301)):(i.addClass("clicked"),a.deleteConfirmDayOff(o,t,i)),!1})},deleteConfirmDayOff:function(a,i,o){var t=this,n=e("#bookmify_be_confirm");n.addClass("opened dayoff_confirm");var s=e("#bookmify_be_confirm.dayoff_confirm").find("a.yes"),r=e("#bookmify_be_confirm.dayoff_confirm").find("a.no");s.off().on("click",function(s){o.removeClass("clicked"),o.addClass("loading"),a.addClass("loading"),s.preventDefault(),n.removeClass("opened dayoff_confirm");var r={action:"ajaxQueryDeleteDayOff",bookmify_day_off_id:i};e.ajax({type:"POST",url:t.ajaxurl,cache:!0,data:r,success:function(){return a.slideUp(500),setTimeout(function(){a.remove()},600),a.parent().removeClass("opened"),t.updateDayOffOfEmployee(),setTimeout(function(){e.iaoAlert({msg:t.alertSuccessIcon+t.deletedText,type:"success",alertTime:t.iaoAlertTime,position:t.iaoAlertPosition})},800),!1}})}),r.on("click",function(){return o.removeClass("clicked"),n.removeClass(),!1})},scrollToTop:function(a){e(".bookmify_be_popup_form_wrap").animate({scrollTop:0},a)},cancelItem:function(){var a=this;e(".bookmify_be_popup_form_button a.cancel").off().on("click",function(){return a.closePopupForm(),!1})},insertEmployee:function(){var a=this;e(".bookmify_be_add_new_employee a").off().on("click",function(){if(parseInt(e(".bookmify_be_page_title h3 span.count").html())>=3&&e(".bookmify_be_employees").length)e.iaoAlert({msg:a.alertSuccessIcon+n.lightVersion,type:"success",alertTime:15e3,position:a.iaoAlertPosition});else{e(".bookmify_be_filter_list").removeClass("opened");var o=i.cloneForm.clone();e("body").addClass("disable_scroll").append(o),e("body > .bookmify_be_popup_form_wrap").addClass("bookmify_be_popup_form_employee"),a.imgToSvg(),a.universalTab(),a.intlTelInput(),a.mediaUploadToEmployee(),a.popperLocations(),a.popperWPUsers(),a.employeeServicesOnClick(),a.workingHoursPopper(),a.checkWorkingHours(),a.applyHours(),a.breaksAdd(),a.breaksPopper(),a.breaksDelete(),a.breakTimeSelect(),a.updateDayOffOfEmployee(),a.multiDatesPickerEmployees(),a.datePickerSingle(),a.addDayOffToEmployee(),a.deleteDayOff(),a.googleDisable(),a.saveEmployee(),a.cancelItem(),e("body > .bookmify_be_popup_form_wrap").addClass("enable"),a.closersPopup()}return!1})}};e(document).ready(function(){s.init()}),e(window).load(function(){s.workingHoursPopper()})}(jQuery);