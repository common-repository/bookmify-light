!function(e){"use strict";var a=bookmifyConfig,t={serviceID:"",serviceName:"",employeeID:"",extras:[],date:"",time:"",customerExist:"",preloader:"",servicePrice:0,extrasPrice:0,serviceDuration:0,extrasDuration:0,peopleCount:0,extraSlotsCount:0,capacityMax:"",haveExtras:"",details:{},html:"",dateLocalFormat:"",extraContent:"",daysOff:"",detailsInfo:"",customFieldsFooter:"",timezoneOffset:""},i={janNameInLocal:e(".bookmify_be_months_hidden").find(".jan").val(),febNameInLocal:e(".bookmify_be_months_hidden").find(".feb").val(),marNameInLocal:e(".bookmify_be_months_hidden").find(".mar").val(),aprNameInLocal:e(".bookmify_be_months_hidden").find(".apr").val(),mayNameInLocal:e(".bookmify_be_months_hidden").find(".may").val(),junNameInLocal:e(".bookmify_be_months_hidden").find(".jun").val(),julNameInLocal:e(".bookmify_be_months_hidden").find(".jul").val(),augNameInLocal:e(".bookmify_be_months_hidden").find(".aug").val(),sepNameInLocal:e(".bookmify_be_months_hidden").find(".sep").val(),octNameInLocal:e(".bookmify_be_months_hidden").find(".oct").val(),novNameInLocal:e(".bookmify_be_months_hidden").find(".nov").val(),decNameInLocal:e(".bookmify_be_months_hidden").find(".dec").val(),defaultOption:e(".bookmify_be_months_hidden").find(".def").val()},o={iaoAlertTime:"5000",iaoAlertPosition:"bottom-right",alertSuccessIcon:'<span class="icon_holder success"><i class="xcon-ok"></i></span>',alertWarningIcon:'<span class="icon_holder warning"><i class="xcon-attention-alt"></i></span>',durationText:a.durationText,nextText:a.nextText,onSiteText:a.onSiteText,paypalText:a.paypalText,stripeText:a.stripeText,errorField:a.errorField,invalidEmail:a.invalidEmail,invalidPhone:a.invalidPhone,invalidEmailPhone:a.invalidEmailPhone,noExtras:a.noExtras,extras:a.extras,ajaxurl:a.ajaxUrl,stripePKey:a.stripePKey,stripeON:a.stripeON,paypalON:a.paypalON,timezone:a.timezone,init:function(){this.imgToSvg(),this.alphaServiceSelect()},imgToSvg:function(){e("img.bookmify_fe_svg").each(function(){var a=e(this),t=a.attr("class"),i=a.attr("src");e.get(i,function(i){var o=e(i).find("svg");void 0!==t&&(o=o.attr("class",t+" replaced-svg")),o=o.removeAttr("xmlns:a"),a.replaceWith(o)},"xml")})},alphaServiceSelect:function(){var a=e(".bookmify_fe_alpha"),i=this;a.each(function(){var a=e(this),o=a.find("ul.bookmify_fe_list li"),n=a.find(".bookmify_fe_main_list"),s=a.find(".bookmify_fe_app_header"),r=s.find("h3.choose"),l=s.find("h3.back_to"),f=s.find(".span_bg");a.find(".bookmify_fe_service_list").length&&new PerfectScrollbar(".bookmify_fe_service_list",{suppressScrollX:!0,wheelSpeed:.5,wheelPropagation:!0});var d=o.length;d>10&&parseFloat(1.5/d),a.find(".bookmify_fe_app_header").off().on("click",function(){if(s.hasClass("back_to_services")){for(var e=0;e<d;e++)i.animateReverseLoop(o,d,e);r.animate({left:"0px",opacity:1},500),l.animate({left:"20px",opacity:0},500),f.animate({bottom:"0px"},500),n.animate({opacity:0,top:"-40px"},500),o.removeClass("abs"),n.addClass("abs"),a.find(".bookmify_fe_main_list_item").removeClass("closed step_closed").find(".item_result").attr("data-empty","empty"),a.find(".item_footer").html(t.preloader),a.find(".bookmify_fe_main_list .service_holder .info_bottom h3").text(""),a.find(".bookmify_fe_main_list .service_holder .info_bottom p").text(""),a.find(".bookmify_fe_main_list .service_holder .info_top .img_holder").css({backgroundImage:"none"}),a.find(".item_footer").removeClass("opened").slideUp(),a.find(".bookmify_fe_main_list .extra_holder").remove(),a.find(".bookmify_fe_main_list .counter_holder").remove(),a.find(".bookmify_fe_main_list .details_holder").remove(),a.find(".item_result").text(""),a.find(".bookmify_fe_app .error_note").remove(),t.serviceID="",t.employeeID="",t.extras=[],t.date="",t.time="",t.customerExist="",t.servicePrice=0,t.extrasPrice=0,t.serviceDuration=0,t.extrasDuration=0,t.peopleCount=0,t.extraSlotsCount=0,t.details={},t.haveExtras="",t.serviceName="",t.customFieldsFooter="",a.find(".price_holder .total_price").html(i.integerToPriceFormatFunction(0))}return s.removeClass("back_to_services"),!1});var c=a.find(".bookmify_fe_dropdown"),_=a.find(".bookmify_fe_main_list_item.bottom_holder span.total_result"),m=c.find(".bookmify_fe_dd_item"),p=a.find(".submit_holder .bookmify_fe_approve_button");c.length&&(_.off().on("click",function(e){e.stopPropagation(),e.preventDefault(),c.hasClass("opened")?c.removeClass("opened"):c.addClass("opened")}),m.off().on("click",function(){var a=e(this),t="";if(!a.hasClass("active")){switch(p.removeClass("enabled"),m.removeClass("active"),a.addClass("active"),a.data("id")){case"on-site":t=i.onSiteText,e(p[0]).addClass("enabled");break;case"paypal":t=i.paypalText,e(p[1]).addClass("enabled");break;case"stripe":t=i.stripeText,e(p[2]).addClass("enabled")}_.find(".t_text").text(t)}c.removeClass("opened")}),e(window).on("click",function(){c.removeClass("opened")}),c.on("click",function(e){e.stopPropagation(),e.preventDefault()})),o.off().on("click",function(){var c=e(this),_=c.closest(".bookmify_fe_list_item"),m=_.data("service-id"),p=_.find(".i_h_service_title").val(),h=_.find(".i_h_service_dur_html").val(),u=_.find(".i_h_service_img").val(),v=c.closest(".bookmify_fe_alpha");if(""===t.html&&(t.html=v.html()),t.serviceDuration=parseInt(_.find(".i_h_service_duration").val()),_.addClass("clicked"),t.serviceName=p,a.find(".bookmify_fe_main_list_item.service_holder .info_bottom h3").text(p),a.find(".bookmify_fe_main_list_item.service_holder .info_bottom p").text(i.durationText+": "+h),a.find(".bookmify_fe_main_list_item.service_holder .info_top .img_holder").css({backgroundImage:"url("+u+")"}),t.detailsInfo=a.find(".bf_details_info").html(),a.find(".bookmify_fe_main_list_item.customer_holder").find(".item_footer").html(t.detailsInfo),a.find(".bookmify_fe_main_list_item.specialist_holder").find(".item_footer").slideDown().addClass("opened"),"on"===i.timezone&&(t.timezoneOffset=(new Date).getTimezoneOffset()),!a.hasClass("await")){a.addClass("await"),t.serviceID=m;var b={action:"ajaxQueryGetEmployeeList",bookmify_data:t.serviceID};t.preloader=a.find(".bookmify_fe_main_list_item.specialist_holder .item_footer").html(),e.ajax({type:"POST",url:i.ajaxurl,cache:!0,data:b,success:function(o){var n=e.parseJSON(o);a.find(".bookmify_fe_main_list_item.specialist_holder .item_footer").html(n.html),a.find(".bookmify_fe_main_list_item.specialist_holder").after(n.html2),t.extraContent=n.html3,i.alphaChooseEmployee(a),a.find(".bookmify_fe_main_list_item.customer_holder").after(n.html4),t.customFieldsFooter=n.html5,i.imgToSvg()},error:function(){}});for(var y=0;y<d;y++)i.animateLoop(o,d,y);setTimeout(function(){o.removeClass("clicked"),s.hasClass("back_to_services")?s.removeClass("back_to_services"):(o.addClass("abs"),n.removeClass("abs"),a.removeClass("await").addClass("step_2"),f.animate({bottom:"-40px"},500),setTimeout(function(){s.addClass("back_to_services"),n.animate({opacity:1,top:"0px"},500)},500)),i.alphaApprove(a)},150*(d+1)),r.animate({left:"20px",opacity:0},500),setTimeout(function(){l.animate({left:"0px",opacity:1},500)},500)}})})},animateLoop:function(a,t,i){setTimeout(function(){e(a[t-i-1]).animate({top:"-20px",opacity:0},300)},150*i)},animateReverseLoop:function(a,t,i){setTimeout(function(){e(a[t-i-1]).animate({top:"0px",opacity:1},300)},150*i)},alphaChooseEmployee:function(a){var i=this;a.find(".radio_inner label").off().on("click",function(){var o=e(this).closest(".bookmify_fe_radio_item"),n=o.data("employee-id"),s=o.find(".i_h_employee_name").val(),r=parseFloat(o.find(".i_h_service_price").val()),l=parseInt(o.find(".i_h_service_cap_max").val()),f=o.closest(".bookmify_fe_main_list_item"),d=f.index(),c=f.find(".bookmify_fe_alpha_next_button");return t.employeeID=n,t.servicePrice=r,t.capacityMax=l,a.find(".price_holder .total_price").html(i.integerToPriceFormatFunction(r)),o.find(".req").prop("checked",!0),c.removeClass("disabled"),i.alphaNextStep(d,s,a,c.find("a")),!1})},alphaNextStep:function(e,a,t,i,o,n){o=void 0!==o?o:"",n=void 0!==n?n:"";var s=t.find(".bookmify_fe_main_list_item:nth-child("+(e+1)+")");s.find(".item_result").attr("data-empty","full"),s.find(".item_result").html(a),s.addClass("closed");var r=t.find(".bookmify_fe_main_list_item:nth-child("+(e+2)+")");this.alphaDoNextStep(s,r,i,o,n)},alphaDoNextStep:function(a,i,o,n,s){var r=this,l=a.closest(".bookmify_fe_alpha");""===n?(o.parent().hasClass("input_wrapper")||o.on("click",function(){if(a.find(".item_footer").slideUp(500),setTimeout(function(){a.addClass("step_closed"),a.find(".item_footer").removeClass("opened"),r.alphaJumpToClosedItem(l)},500),!i.hasClass("bottom_holder")){if(a.hasClass("specialist_holder")){var o={action:"ajaxQueryGetEmployeeDaysOff",bookmify_employee_id:t.employeeID};e.ajax({type:"POST",url:r.ajaxurl,cache:!0,data:o,success:function(e){t.daysOff=e,r.alphaEmployeeDaysOffAjaxProcess(e,l)},error:function(){}}),t.capacityMax>1&&(l.find(".bookmify_fe_main_list .counter_holder").length&&l.find(".bookmify_fe_main_list .counter_holder").remove(),a.after(l.find(".bf_people_count_section").html()),i=l.find(".bookmify_fe_main_list .counter_holder"))}r.alphaJumpNextStep(i)}return!1}),""!==s&&(a.find(".item_footer").slideUp(500),setTimeout(function(){a.addClass("step_closed"),a.find(".item_footer").removeClass("opened"),r.alphaJumpToClosedItem(l)},500),r.alphaJumpNextStep(i))):(a.find(".item_footer").slideUp(500).removeClass("opened"),l.find(".submit_holder").removeClass("disabled"),a.addClass("step_closed"),r.alphaApprove(l),r.alphaJumpToClosedItem(l))},alphaJumpToClosedItem:function(a){var i=this;a.find(".step_closed").on("click",function(){var o=e(this),n=o.index();if(o.hasClass("step_closed")){o.removeClass("step_closed"),a.find(".bottom_holder .submit_holder").addClass("disabled");var s=a.find(".bookmify_fe_main_list .bookmify_fe_main_list_item").length;a.find(".bookmify_fe_main_list .item_footer").hasClass("opened")&&a.find(".bookmify_fe_main_list .item_footer.opened").slideUp().removeClass("opened");for(var r="",l=n+2;l<s;l++){var f=a.find(".bookmify_fe_main_list .bookmify_fe_main_list_item:nth-child("+l+")");f.hasClass("counter_holder")&&(r="yes"),f.removeClass("closed step_closed"),f.find(".item_result").attr("data-empty","empty"),f.find(".item_result").html(""),f.find(".item_footer").html(t.preloader)}"yes"===r&&a.find(".bookmify_fe_main_list .counter_holder").remove(),o.hasClass("specialist_holder")?(t.extras=[],t.date="",t.time="",t.customerExist="",t.extrasPrice=0,t.peopleCount=0,t.extraSlotsCount=0,t.details={},t.haveExtras=""):o.hasClass("counter_holder")?(t.extras=[],t.date="",t.time="",t.customerExist="",t.extrasPrice=0,t.extraSlotsCount=0,t.details={},t.haveExtras=""):o.hasClass("extra_holder")?(t.date="",t.time="",t.customerExist="",t.details={}):o.hasClass("date_holder")&&(t.customerExist="",t.details={}),a.find(".price_holder .total_price").html(i.integerToPriceFormatFunction(t.servicePrice*(t.peopleCount+1)+t.extrasPrice)),o.find(".item_footer").addClass("opened").slideDown()}})},alphaEmployeeDaysOffAjaxProcess:function(a,i){var o=this,n=e.parseJSON(a),s=new Date,r=s.getHours(),l=s.getMinutes(),f=0,d=parseFloat(i.find(".bf_mttb").val());d<1?(l+=60*d)>60&&r++:d>=1&&d<24?(r+=d)>=24&&(f="+1d"):f="+"+d/24+"d";var c=n.bookmify_be_time,_=[];e.each(c,function(e,a){7===a&&(a=0),_.push(a)});var m=i.find(".bookmify_fe_main_list_item.date_holder .item_footer");m.html("").html('<div class="date_picker"></div><div class="bookmify_fe_alpha_next_button disabled"><a href="#">'+o.nextText+"</a></div>"),o.imgToSvg(),m.find(".date_picker").datepicker({firstDay:1,dateFormat:"yy-mm-dd",setDate:null,defaultDate:null}),m.find(".date_picker").datepicker("setDate",null),m.find(".date_picker").datepicker("option",{minDate:f,setDate:null,defaultDate:null,beforeShowDay:function(a){var t=e.datepicker.formatDate("yy-mm-dd",a),i=e.datepicker.formatDate("mm-dd",a),o=a.getDay();return[-1===e.inArray(i,n.arr2)&&-1===e.inArray(t,n.bookmify_be_data)&&-1===_.indexOf(o)]},onSelect:function(e){t.date=e,t.dateLocalFormat=o.wpDateToOptionDate(e),m.find(".bookmify_fe_alpha_next_button").addClass("disabled"),o.alphaGetTimeSlotsOfSelectedDay(i)}}),m.find(".date_picker .ui-state-active").removeClass("ui-state-active")},alphaGetTimeSlotsOfSelectedDay:function(a){var i=this;a.find(".bookmify_fe_main_list_item.date_holder .time_wrap").remove(),a.find(".bookmify_fe_main_list_item.date_holder .date_picker").after('<div class="time_wrap">'+t.preloader+"</div>");var o=a.find(".time_wrap"),n=t.date,s=t.serviceID,r=t.employeeID;o.addClass("waiting");var l=new Date,f=parseFloat(a.find(".bf_mttb").val()),d=l.getHours(),c=l.getMinutes(),_=(new Date(n).getTime()-l.getTime())/864e5;f<1?(c+=60*f)>=60&&(d++,c-=60):f>=1&&f<24&&(d+=f);var m={action:"ajaxQueryGetTimeSlotsOfSelectedDay",serID:s,empID:r,dateVal:n,selDayBetween:Math.floor(_)+1,newHours:d,newMinutes:c,extraDuration:t.extrasDuration,capacityMax:t.capacityMax,peopleCount:t.peopleCount,duration:t.serviceDuration+t.extrasDuration,timezoneOffset:t.timezoneOffset};e.ajax({type:"POST",url:i.ajaxurl,cache:!0,data:m,success:function(e){i.timeSlotsOfSelectedDayAjaxProcess(e,o),o.removeClass("waiting")},error:function(){}})},timeSlotsOfSelectedDayAjaxProcess:function(a,i){var o=e.parseJSON(a),n=o.bookmify_be_data;t.extraSlotsCount=o.extra_slots,i.html("").html(n),i.find(".time_content").length&&new PerfectScrollbar("#bokmify_fe_alpha_time_content",{suppressScrollX:!0,wheelSpeed:.5,wheelPropagation:!1}),this.alphaTimeSelect(i,o.app_count)},alphaTimeSelect:function(a,i){var o=this,n=a.find(".time_item"),s=n.closest(".bookmify_fe_alpha");n.off().on("click",function(){var a=e(this),r=a.find("span").html();n.removeClass("active"),a.addClass("active");var l=n.closest(".item_footer").find(".bookmify_fe_alpha_next_button"),f=n.closest(".bookmify_fe_main_list_item").index();i&&(l.removeClass("disabled"),t.time=a.find("input[type=hidden]").val(),o.alphaNextStep(f,t.dateLocalFormat+'<span class="app_time">'+r+"</span>",s,l.find("a")))})},alphaJumpNextStep:function(a){var i=this,o=a.closest(".bookmify_fe_alpha");if(a.hasClass("extra_holder")&&(a.find(".item_footer").html(t.extraContent),i.imgToSvg(),a.find("label").off().on("click",function(){var t=e(this),o=t.closest(".bookmif_fe_extras_list_item"),n=t.find(".req"),s=o.find(".bookmify_fe_quantity");return n.is(":checked")?(n.prop("checked",!1),s.find("input").attr("disabled","disabled"),s.addClass("disabled"),o.removeClass("active")):(n.prop("checked",!0),s.removeClass("disabled"),o.addClass("active"),s.find("input").removeAttr("disabled")),i.alphaExtraQuantity(),i.alphaExtraValue(a),!1}),i.alphaExtraValue(a)),a.hasClass("customer_holder")){a.find(".item_footer").html(t.detailsInfo),i.movingPlaceholders();var n=a.find(".item_footer .input_done a");i.alphaDetailsDone(o,a,n)}if(a.hasClass("counter_holder")){var s=o.find(".bf_people_count_content").html();a.find(".item_footer").html(s),a.find("input.extra_quantity").attr("max",t.capacityMax-1),a.find("label").off().on("click",function(){var t=e(this),o=t.closest(".bookmif_fe_count_list_item"),n=t.find(".req"),s=o.find(".bookmify_fe_quantity");return n.is(":checked")?(n.prop("checked",!1),s.find("input").attr("disabled","disabled"),s.addClass("disabled"),o.removeClass("active")):(n.prop("checked",!0),s.removeClass("disabled"),o.addClass("active"),s.find("input").removeAttr("disabled")),i.alphaPeopleQuantity(),i.alphaPeopleValue(a),!1}),i.alphaPeopleValue(a)}if(a.hasClass("date_holder")&&""!==t.daysOff&&i.alphaEmployeeDaysOffAjaxProcess(t.daysOff,o),a.hasClass("details_holder")){a.find(".item_footer").html(t.customFieldsFooter),i.imgToSvg();var r=a.find(".required_cf"),l=r.length,f=a.index(),d=o;a.find(".cf_button a").off().on("click",function(){var t=0;e(this);return r.removeClass("danger"),l>0&&r.each(function(){var a=e(this);a.find(".bookmify_fe_cf_radiobox").length?0===a.find("input:checked").length&&(t++,a.addClass("danger")):a.find(".bookmify_fe_cf_select").length?0===a.find("select option:not(:first-child):selected").length&&(t++,a.addClass("danger")):a.find(".bookmify_fe_cf_checkbox").length?0===a.find("input:checked").length&&(t++,a.addClass("danger")):a.find(".bookmify_fe_cf_text").length?""===a.find("input").val()&&(t++,a.addClass("danger")):a.find(".bookmify_fe_cf_textarea").length&&""===a.find("textarea").val()&&(t++,a.addClass("danger"))}),0===t?i.alphaNextStep(f,"Done",d,n,"noclick"):e([document.documentElement,document.body]).animate({scrollTop:a.offset().top},500),!1})}a.find(".item_footer").slideDown(500),setTimeout(function(){a.find(".item_footer").addClass("opened")},500)},alphaPeopleValue:function(a){var i=this,o="",n="",s=a.index(),r=a.closest(".bookmify_fe_alpha"),l=a.find(".bookmify_fe_alpha_next_button a");t.peopleCount=0,a.find(".bookmif_fe_count_list_item").each(function(){var a=e(this);if(a.hasClass("active")){var s=parseInt(a.find(".extra_quantity").val());o=s,t.peopleCount=s}r.find(".price_holder .total_price").html(i.integerToPriceFormatFunction(t.servicePrice*(t.peopleCount+1)+t.extrasPrice)),n=""===o?0:o}),i.alphaNextStep(s,n,r,l)},alphaExtraValue:function(a){var i="",o="",n=a.index(),s=a.closest(".bookmify_fe_alpha"),r=a.find(".bookmify_fe_alpha_next_button a"),l="",f=a.find(".bookmif_fe_extras_list_item.active").length;t.extras=[],t.extrasPrice=0,t.extrasDuration=0,t.haveExtras="",f>0&&(t.haveExtras="yes"),a.find(".bookmif_fe_extras_list_item").each(function(){var a=e(this);if(a.hasClass("active")){var o=a.find(".i_h_extra_title").val(),n=parseInt(a.find(".extra_quantity").val()),s=parseInt(a.find(".i_h_extra_duration").val()),r=parseFloat(a.find(".i_h_extra_price").val()),f=parseInt(a.find(".i_h_extra_id").val());i+='<span class="extra_item"><span class="extra_name">'+o+'</span><span class="extra_count">('+n+")</span></span>",l+=o+"("+n+") ",t.extras.push([f,n]),t.extrasPrice+=(t.peopleCount+1)*n*r,t.extrasDuration+=(t.peopleCount+1)*n*s}}),s.find(".price_holder .total_price").html(this.integerToPriceFormatFunction(t.servicePrice*(t.peopleCount+1)+t.extrasPrice)),o=""===i?this.noExtras:'<span class="extra_items" title="'+l+'">'+i+"</span>",f>1&&(o='<div class="extra_items_dd"><span>'+f+" "+this.extras+'</span><div class="ei_dd"><div class="ei_dd_in"><span class="bf_triangle"><span></span></span>'+i+"</div></div></div>"),this.alphaNextStep(n,o,s,r)},alphaExtraQuantity:function(){var a=this;e(".bookmify_fe_main_list_item.extra_holder .bookmify_fe_quantity").each(function(){var t=e(this),i=t.find('input[type="number"]'),o=t.find(".increase"),n=t.find(".decrease"),s=i.attr("min"),r=i.attr("max"),l=t.closest(".bookmify_fe_main_list_item");t.hasClass("disabled")||(o.off().on("click",function(){var e,o=parseFloat(i.val());return o>=r?(e=o,!1):(e=o+1,t.find("input").val(e),t.find("input").trigger("change"),a.alphaExtraValue(l),!1)}),n.off().on("click",function(){var e,o=parseFloat(i.val());return o<=s?(e=o,!1):(e=o-1,t.find("input").val(e),t.find("input").trigger("change"),a.alphaExtraValue(l),!1)}))})},alphaPeopleQuantity:function(){var a=this;e(".bookmify_fe_main_list_item.counter_holder .bookmify_fe_quantity").each(function(){var t=e(this),i=t.find('input[type="number"]'),o=t.find(".increase"),n=t.find(".decrease"),s=i.attr("min"),r=i.attr("max"),l=t.closest(".bookmify_fe_main_list_item");t.hasClass("disabled")||(o.off().on("click",function(){var e,o=parseFloat(i.val());return o>=r?(e=o,!1):(e=o+1,t.find("input").val(e),t.find("input").trigger("change"),a.alphaPeopleValue(l),!1)}),n.off().on("click",function(){var e,o=parseFloat(i.val());return o<=s?(e=o,!1):(e=o-1,t.find("input").val(e),t.find("input").trigger("change"),a.alphaPeopleValue(l),!1)}))})},movingPlaceholders:function(){e(".bookmify_fe_moving_input").each(function(){var a=e(this),t=a.find("input, textarea");t.on("focus",function(){a.addClass("active"),a.find(".required_error").removeClass("required_error")}).on("blur",function(){""===t.val()&&a.removeClass("active")})})},alphaDetailsDone:function(a,i,o){var n=this;o.on("click",function(){if(!o.hasClass("loading")){o.addClass("loading");var s=a.find(".bookmify_fe_main_list_item.customer_holder"),r=s.find(".required_field"),l=0,f=0,d=0,c=0,_="",m=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,p=[],h=",",u=s.find(".input_phone input");if(""!==u.val()&&(/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s\.\/0-9]{6,17}$/.test(u.val())||(u.parent().addClass("required_error"),c++,f++)),r.each(function(){var a=e(this),t=a.find("input,textarea");a.hasClass("input_email")&&(m.test(t.val())||(t.parent().addClass("required_error"),d++,f++)),""===t.val()&&(p.push(a.find(".moving_placeholder span").html()),t.parent().addClass("required_error"),l++,f++)}),e.each(p,function(e,a){e+1===l&&(h="."),_+="<span>"+a+h+"</span>"}),a.find(".item_row.input_done").find(".error_note").remove(),l>0?(a.find(".item_row.input_done .input_wrapper").after('<span class="error_note">'+n.errorField+_+"</span>"),o.removeClass("loading")):d>0&&0===c?(a.find(".item_row.input_done .input_wrapper").after('<span class="error_note">'+n.invalidEmail+"</span>"),o.removeClass("loading")):0===d&&c>0?(a.find(".item_row.input_done .input_wrapper").after('<span class="error_note">'+n.invalidPhone+"</span>"),o.removeClass("loading")):d>0&&c>0&&(a.find(".item_row.input_done .input_wrapper").after('<span class="error_note">'+n.invalidEmailPhone+"</span>"),o.removeClass("loading")),0===f){var v=i.index(),b=i.find(".input_first_name input").val(),y=i.find(".input_last_name input").val(),x=i.find(".input_email input").val(),k=i.find(".input_phone input").val(),C=i.find(".input_message textarea").val(),g=b+" "+y;t.details.first_name=b,t.details.last_name=y,t.details.email=x,t.details.phone=k,t.details.message=C;var D={action:"ajaxCheckCustomerDetails",firstName:b,lastName:y,email:x};e.ajax({type:"POST",url:n.ajaxurl,cache:!0,data:D,success:function(i){var s=e.parseJSON(i),r=s.error,l=s.exist;t.customerExist=l,""===r?(o.removeClass("loading"),a.find(".details_holder").length?n.alphaNextStep(v,g,a,o,"","asd"):n.alphaNextStep(v,g,a,o,"noclick")):(a.find(".item_row.input_done").find(".error_note").remove(),a.find(".item_row.input_email .input_wrapper").addClass("required_error"),a.find(".item_row.input_done .input_wrapper").after('<span class="error_note">'+s.error+"</span>"),o.removeClass("loading"))},error:function(){}})}}return!1})},alphaApprove:function(a){var i=this,o=a.find(".bookmify_fe_app_in"),n=a.find(".bookmify_fe_success");a.find(".submit_holder a.bookmify_fe_main_button").off().on("click",function(){var s=e(this);if(!s.parent().hasClass("disabled")&&!a.hasClass(s.hasClass("enabled"))){a.addClass("last_step");var r={},l=a.find(".details_holder");if(l.length){var f=l.find(".bookmify_fe_cf_radiobox"),d=l.find(".bookmify_fe_cf_select"),c=l.find(".bookmify_fe_cf_checkbox"),_=l.find(".bookmify_fe_cf_text"),m=l.find(".bookmify_fe_cf_textarea");if(c.length){var p=[];c.each(function(){var a=e(this),t=a.closest(".bookmify_fe_cf_list_item").find(".bookmify_fe_cf_id").val(),i=[],o=[];e.each(a.find(".req:checked"),function(){var a=e(this).closest("label");i.push(a.index()),o.push(a.find(".count_title").text())}),p.push([t,i,o])}),r.checkbox=p}if(f.length){var h=[];f.each(function(){var a=e(this),t=a.closest(".bookmify_fe_cf_list_item").find(".bookmify_fe_cf_id").val(),i=a.find(".req:checked").closest("label").index(),o=a.find(".req:checked").closest("label").find(".e_name").text();h.push([t,i,o])}),r.radio=h}if(d.length){var u=[];d.each(function(){var a=e(this),t=a.closest(".bookmify_fe_cf_list_item").find(".bookmify_fe_cf_id").val(),i=a.find("option:selected").index(),o=a.find("option:selected").text();u.push([t,i,o])}),r.select=u}if(_.length){var v=[];_.each(function(){var a=e(this),t=a.closest(".bookmify_fe_cf_list_item").find(".bookmify_fe_cf_id").val(),i=a.find("input[type=text]").val();v.push([t,i])}),r.text=v}if(m.length){var b=[];m.each(function(){var a=e(this),t=a.closest(".bookmify_fe_cf_list_item").find(".bookmify_fe_cf_id").val(),i=e.trim(a.find("textarea").val());b.push([t,i])}),r.textarea=b}}var y={action:"ajaxCreateNewAppointment",serviceID:parseInt(t.serviceID),employeeID:parseInt(t.employeeID),date:t.date,time:t.time,extras:JSON.stringify(t.extras),details:JSON.stringify(t.details),duration:t.extrasDuration+t.serviceDuration,customerExist:t.customerExist,peopleCount:parseInt(t.peopleCount),haveExtras:t.haveExtras,extraSlotsCount:parseInt(t.extraSlotsCount),customFields:JSON.stringify(r)};e.ajax({type:"POST",url:i.ajaxurl,cache:!0,data:y,success:function(){o.animate({left:"0px",opacity:0},500),setTimeout(function(){o.addClass("abs"),n.removeClass("abs").addClass("ready"),n.animate({left:"0px",opacity:1},500)},500),setTimeout(function(){n.find(".svg_holder").animate({bottom:"0px",opacity:1},700)},1e3),setTimeout(function(){n.find(".content_holder h3").animate({bottom:"0px",opacity:1},700)},1200),setTimeout(function(){n.find(".content_holder p").animate({bottom:"0px",opacity:1},700)},1400),setTimeout(function(){n.find(".content_holder").animate({bottom:"0px",opacity:1},700)},1600),i.alphaGetAlphaAgain(a)},error:function(){}})}return!1})},integerToPriceFormatFunction:function(a){var t,i,o,n,s=e(".bookmify_fe_price_hidden"),r=s.find(".currency_format").val(),l=s.find(".currency_position").val(),f=s.find(".price_format").val(),d=parseFloat(s.find(".price_decimal").val());switch(f){default:case"cd":o=".",n=",";break;case"dc":o=",",n=".";break;case"sd":o=".",n=" ";break;case"sc":o=",",n=" "}isNaN(d=Math.abs(d))&&(d=2),(i=(t=parseInt(a=(+a||0).toFixed(d))+"").length)>3?i%=3:i=0;var c=(i?t.substr(0,i)+n:"")+t.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+n)+(d?o+Math.abs(a-t).toFixed(d).replace(/-/,0).slice(2):"");switch(l){default:case"left":c=r+c;break;case"lspace":c=r+" "+c;break;case"right":c+=r;break;case"rspace":c=c+" "+r}return c},wpDateToOptionDate:function(e){var a=e.split("-"),t="",o="";switch(parseInt(a[1])){case 1:o=i.janNameInLocal;break;case 2:o=i.febNameInLocal;break;case 3:o=i.marNameInLocal;break;case 4:o=i.aprNameInLocal;break;case 5:o=i.mayNameInLocal;break;case 6:o=i.junNameInLocal;break;case 7:o=i.julNameInLocal;break;case 8:o=i.augNameInLocal;break;case 9:o=i.sepNameInLocal;break;case 10:o=i.octNameInLocal;break;case 11:o=i.novNameInLocal;break;case 12:o=i.decNameInLocal}switch(i.defaultOption){case"F d, Y":t=o+" "+a[2]+", "+a[0];break;case"d F, Y":t=a[2]+" "+o+", "+a[0];break;case"Y-m-d":t=a[0]+"-"+a[1]+"-"+a[2];break;case"m/d/y":t=a[1]+"/"+a[2]+"/"+a[0];break;case"d/m/y":t=a[2]+"/"+a[1]+"/"+a[0]}return t},alphaGetAlphaAgain:function(e){var a=this,i=e.find(".bookmify_fe_success");e.find(".bookmify_fe_success .success_footer a").off().on("click",function(){return i.animate({left:"0px",opacity:0},500),setTimeout(function(){e.removeClass("last_step step_2"),e.html('<div class="bookmify_fe_removable_class">'+t.html+"</div>"),e.find(".bookmify_fe_removable_class").animate({right:"0px",opacity:1}),a.init()},500),setTimeout(function(){e.find(".bookmify_fe_removable_class").removeClass()},1e3),!1})}};e(document).ready(function(){o.init()})}(jQuery);